<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>线程池 | 一兜小白菜</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/learning_blog/logo.png">
    <link rel="manifest" href="/learning_blog/manifest.json">
    <meta name="description" content="learning something">
    <link rel="preload" href="/learning_blog/assets/css/0.styles.292e88f6.css" as="style"><link rel="preload" href="/learning_blog/assets/js/app.b8c437fb.js" as="script"><link rel="preload" href="/learning_blog/assets/js/2.0271e996.js" as="script"><link rel="preload" href="/learning_blog/assets/js/36.1869c4d4.js" as="script"><link rel="prefetch" href="/learning_blog/assets/js/10.9596189d.js"><link rel="prefetch" href="/learning_blog/assets/js/11.caa8a3ce.js"><link rel="prefetch" href="/learning_blog/assets/js/12.c835fde2.js"><link rel="prefetch" href="/learning_blog/assets/js/13.f13ef90d.js"><link rel="prefetch" href="/learning_blog/assets/js/14.cb65a506.js"><link rel="prefetch" href="/learning_blog/assets/js/15.67679d14.js"><link rel="prefetch" href="/learning_blog/assets/js/16.a61c99f4.js"><link rel="prefetch" href="/learning_blog/assets/js/17.fa3ffcb1.js"><link rel="prefetch" href="/learning_blog/assets/js/18.a6f67ac0.js"><link rel="prefetch" href="/learning_blog/assets/js/19.d64da146.js"><link rel="prefetch" href="/learning_blog/assets/js/20.f3aea93c.js"><link rel="prefetch" href="/learning_blog/assets/js/21.0d54a03a.js"><link rel="prefetch" href="/learning_blog/assets/js/22.af5f8ff3.js"><link rel="prefetch" href="/learning_blog/assets/js/23.d62f60ff.js"><link rel="prefetch" href="/learning_blog/assets/js/24.e82ab4f9.js"><link rel="prefetch" href="/learning_blog/assets/js/25.0c6fb9d1.js"><link rel="prefetch" href="/learning_blog/assets/js/26.f76ff027.js"><link rel="prefetch" href="/learning_blog/assets/js/27.b33888ec.js"><link rel="prefetch" href="/learning_blog/assets/js/28.b6bb8900.js"><link rel="prefetch" href="/learning_blog/assets/js/29.da46a9d1.js"><link rel="prefetch" href="/learning_blog/assets/js/3.caa7ea2f.js"><link rel="prefetch" href="/learning_blog/assets/js/30.12109f8c.js"><link rel="prefetch" href="/learning_blog/assets/js/31.d899f45b.js"><link rel="prefetch" href="/learning_blog/assets/js/32.4249f1c4.js"><link rel="prefetch" href="/learning_blog/assets/js/33.4a5eeae5.js"><link rel="prefetch" href="/learning_blog/assets/js/34.d274b518.js"><link rel="prefetch" href="/learning_blog/assets/js/35.040c2e79.js"><link rel="prefetch" href="/learning_blog/assets/js/37.2502c91b.js"><link rel="prefetch" href="/learning_blog/assets/js/38.8a9c4c47.js"><link rel="prefetch" href="/learning_blog/assets/js/39.0372b754.js"><link rel="prefetch" href="/learning_blog/assets/js/4.9cb324be.js"><link rel="prefetch" href="/learning_blog/assets/js/40.36582b46.js"><link rel="prefetch" href="/learning_blog/assets/js/41.a1128dca.js"><link rel="prefetch" href="/learning_blog/assets/js/42.a7a870ab.js"><link rel="prefetch" href="/learning_blog/assets/js/43.52e5222a.js"><link rel="prefetch" href="/learning_blog/assets/js/44.9e3dbdd3.js"><link rel="prefetch" href="/learning_blog/assets/js/45.c2f0e646.js"><link rel="prefetch" href="/learning_blog/assets/js/46.f33c2c8e.js"><link rel="prefetch" href="/learning_blog/assets/js/47.2b23762b.js"><link rel="prefetch" href="/learning_blog/assets/js/48.85c9ecd0.js"><link rel="prefetch" href="/learning_blog/assets/js/5.b8d1112a.js"><link rel="prefetch" href="/learning_blog/assets/js/6.8f0ec843.js"><link rel="prefetch" href="/learning_blog/assets/js/7.7ea023b2.js"><link rel="prefetch" href="/learning_blog/assets/js/8.2ad448e8.js"><link rel="prefetch" href="/learning_blog/assets/js/9.a7b5ef8e.js">
    <link rel="stylesheet" href="/learning_blog/assets/css/0.styles.292e88f6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/learning_blog/" class="router-link-active home-link"><img src="/learning_blog/logo.png" alt="一兜小白菜" class="logo"> <span class="site-name">一兜小白菜</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/learning_blog/" class="router-link-active">
          Home
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-submenu-selected"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          Java Learning
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/learning_blog/go/">
          Go Learning
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          Spring Learning
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          微服务
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          数据库
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/learning_blog/architect/">
          软件架构师
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <!----></nav></div></div> <!----></header> <aside class="sidebar"><!----> <ul class="sidebar-links"><li><a href="/learning_blog/java/thread/" aria-current="page" title="线程概念" class="sidebar-link">线程概念</a></li><li><a href="/learning_blog/java/thread/线程创建方式.html" title="线程创建方式" class="sidebar-link">线程创建方式</a></li><li><a href="/learning_blog/java/thread/线程池.html" title="线程池" class="active sidebar-link">线程池</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/learning_blog/java/thread/线程池.html#概念" title="概念" class="sidebar-link">概念</a></li><li class="sidebar-sub-header"><a href="/learning_blog/java/thread/线程池.html#创建线程池" title="创建线程池" class="sidebar-link">创建线程池</a></li><li class="sidebar-sub-header"><a href="/learning_blog/java/thread/线程池.html#线程池的执行流程" title="线程池的执行流程" class="sidebar-link">线程池的执行流程</a></li><li class="sidebar-sub-header"><a href="/learning_blog/java/thread/线程池.html#线程池执行线程方法-public-void-execute-runnable-command" title="线程池执行线程方法   public void execute(Runnable command)" class="sidebar-link">线程池执行线程方法   public void execute(Runnable command)</a></li><li class="sidebar-sub-header"><a href="/learning_blog/java/thread/线程池.html#四种拒绝策略" title="四种拒绝策略" class="sidebar-link">四种拒绝策略</a></li><li class="sidebar-sub-header"><a href="/learning_blog/java/thread/线程池.html#线程池的工作队列" title="线程池的工作队列" class="sidebar-link">线程池的工作队列</a></li><li class="sidebar-sub-header"><a href="/learning_blog/java/thread/线程池.html#几种常用的线程池" title="几种常用的线程池" class="sidebar-link">几种常用的线程池</a></li><li class="sidebar-sub-header"><a href="/learning_blog/java/thread/线程池.html#线程池状态" title="线程池状态" class="sidebar-link">线程池状态</a></li></ul></li><li><a href="/learning_blog/java/thread/线程生命周期.html" title="线程生命周期" class="sidebar-link">线程生命周期</a></li><li><a href="/learning_blog/java/thread/线程终止.html" title="线程终止" class="sidebar-link">线程终止</a></li><li><a href="/learning_blog/java/thread/sleep()与wait().html" title="sleep() 与 wait()" class="sidebar-link">sleep() 与 wait()</a></li></ul></aside> <main class="page"> <div class="theme-antdocs-content content__default"><h1 id="线程池"><a href="#线程池" class="header-anchor">#</a> 线程池</h1> <h2 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h2> <blockquote><ul><li>简单理解就是一个管理线程的池子</li> <li>它帮我们管理线程，避免增加创建线程和销毁线程的资源耗损。因为线程本身也是一个对象，创建需要经过类加载，回收也要经过GC回收</li> <li>它提高了响应速度。如果任务到达了，相对于在线程池中获取线程，重新创建执行要慢很多</li> <li>重复利用。线程用完，再返回线程池，可以达到重复利用的效果，节约资源</li></ul></blockquote> <h2 id="创建线程池"><a href="#创建线程池" class="header-anchor">#</a> 创建线程池</h2> <p>线程池可以通过ThreadPoolExecutor来创建，看下构造函数:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token keyword">int</span> corePoolSize<span class="token punctuation">,</span>
                          <span class="token keyword">int</span> maximumPoolSize<span class="token punctuation">,</span>
                          <span class="token keyword">long</span> keepAliveTime<span class="token punctuation">,</span>
                          <span class="token class-name">TimeUnit</span> unit<span class="token punctuation">,</span>
                          <span class="token class-name">BlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span> workQueue<span class="token punctuation">,</span>
                          <span class="token class-name">ThreadFactory</span> threadFactory<span class="token punctuation">,</span>
                          <span class="token class-name">RejectedExecutionHandler</span> handler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>corePoolSize <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span>
        maximumPoolSize <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span>
        maximumPoolSize <span class="token operator">&lt;</span> corePoolSize <span class="token operator">||</span>
        keepAliveTime <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>workQueue <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> threadFactory <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> handler <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>acc <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getSecurityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token class-name">AccessController</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>corePoolSize <span class="token operator">=</span> corePoolSize<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>maximumPoolSize <span class="token operator">=</span> maximumPoolSize<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>workQueue <span class="token operator">=</span> workQueue<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>keepAliveTime <span class="token operator">=</span> unit<span class="token punctuation">.</span><span class="token function">toNanos</span><span class="token punctuation">(</span>keepAliveTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>threadFactory <span class="token operator">=</span> threadFactory<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handler <span class="token operator">=</span> handler<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>参数说明</strong></p> <blockquote><ul><li>corePoolSize：核心线程的数量</li> <li>maximumPoolSize：线程池中最大的线程数量</li> <li>keepAliveTime：线程池中非核心线程空闲的存活时间</li> <li>TimeUnit：线程空闲存活时间的时间单位</li> <li>workQueue：存放任务的阻塞队列</li> <li>threadFactory：用于创建核心线程的线程工厂，可以给创建的线程自定义名字，方便查日志</li> <li>handle：线程池的饱和策略（拒绝策略），有四种类型，默认使用 AbortPolicy。</li></ul></blockquote> <h2 id="线程池的执行流程"><a href="#线程池的执行流程" class="header-anchor">#</a> 线程池的执行流程</h2> <img src="/learning_blog/img/java/thread/线程池的执行流程.png" alt="线程池的执行流程"> <p>描述：</p> <blockquote><ul><li>提交一个任务，如果线程池里存活的可信线程数 &lt; corePoolSize，线程池会创建一个核心线程取执行任务。</li> <li>如果核心线程池核心线程数已满，即线程数已经等于 corePoolSize，会把任务先放进阻塞队列中。</li> <li>如果线程池里核心线程数都忙着干其他事，并且任务队列也满了，线程池就会执行拒绝策略，判断线程数是否达到了最大线程数 maximumPoolSize，如果没达到，创建一个非核心线程执行任务，否则就执行拒绝策略。</li></ul></blockquote> <h2 id="线程池执行线程方法-public-void-execute-runnable-command"><a href="#线程池执行线程方法-public-void-execute-runnable-command" class="header-anchor">#</a> 线程池执行线程方法   public void execute(Runnable command)</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * Executes the given task sometime in the future.  The task
 * may execute in a new thread or in an existing pooled thread.
 *
 * If the task cannot be submitted for execution, either because this
 * executor has been shutdown or because its capacity has been reached,
 * the task is handled by the current {@code RejectedExecutionHandler}.
 *
 * @param command the task to execute
 * @throws RejectedExecutionException at discretion of
 *         {@code RejectedExecutionHandler}, if the task
 *         cannot be accepted for execution
 * @throws NullPointerException if {@code command} is null
 */</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> command<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>command <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/*
     * Proceed in 3 steps:
     *
     * 1. If fewer than corePoolSize threads are running, try to
     * start a new thread with the given command as its first
     * task.  The call to addWorker atomically checks runState and
     * workerCount, and so prevents false alarms that would add
     * threads when it shouldn't, by returning false.
     *
     * 2. If a task can be successfully queued, then we still need
     * to double-check whether we should have added a thread
     * (because existing ones died since last checking) or that
     * the pool shut down since entry into this method. So we
     * recheck state and if necessary roll back the enqueuing if
     * stopped, or start a new thread if there are none.
     *
     * 3. If we cannot queue task, then we try to add a new
     * thread.  If it fails, we know we are shut down or saturated
     * and so reject the task.
     */</span>
    <span class="token keyword">int</span> c <span class="token operator">=</span> ctl<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">workerCountOf</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">&lt;</span> corePoolSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">addWorker</span><span class="token punctuation">(</span>command<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        c <span class="token operator">=</span> ctl<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isRunning</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> workQueue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>command<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> recheck <span class="token operator">=</span> ctl<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token function">isRunning</span><span class="token punctuation">(</span>recheck<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">remove</span><span class="token punctuation">(</span>command<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>command<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">workerCountOf</span><span class="token punctuation">(</span>recheck<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token function">addWorker</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">addWorker</span><span class="token punctuation">(</span>command<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>command<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="四种拒绝策略"><a href="#四种拒绝策略" class="header-anchor">#</a> 四种拒绝策略</h2> <h3 id="abortpolicy-抛出一个异常-默认的拒绝策略"><a href="#abortpolicy-抛出一个异常-默认的拒绝策略" class="header-anchor">#</a> AbortPolicy：抛出一个异常，默认的拒绝策略</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * A handler for rejected tasks that throws a
 * {@code RejectedExecutionException}.
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AbortPolicy</span> <span class="token keyword">implements</span> <span class="token class-name">RejectedExecutionHandler</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * Creates an {@code AbortPolicy}.
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">AbortPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Always throws RejectedExecutionException.
     *
     * @param r the runnable task requested to be executed
     * @param e the executor attempting to execute this task
     * @throws RejectedExecutionException always
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">rejectedExecution</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> r<span class="token punctuation">,</span> <span class="token class-name">ThreadPoolExecutor</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RejectedExecutionException</span><span class="token punctuation">(</span><span class="token string">&quot;Task &quot;</span> <span class="token operator">+</span> r<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                                             <span class="token string">&quot; rejected from &quot;</span> <span class="token operator">+</span>
                                             e<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="discardpolicy-直接丢弃任务"><a href="#discardpolicy-直接丢弃任务" class="header-anchor">#</a> DiscardPolicy：直接丢弃任务</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * A handler for rejected tasks that silently discards the
 * rejected task.
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">DiscardPolicy</span> <span class="token keyword">implements</span> <span class="token class-name">RejectedExecutionHandler</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * Creates a {@code DiscardPolicy}.
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">DiscardPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Does nothing, which has the effect of discarding task r.
     *
     * @param r the runnable task requested to be executed
     * @param e the executor attempting to execute this task
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">rejectedExecution</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> r<span class="token punctuation">,</span> <span class="token class-name">ThreadPoolExecutor</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="discardoldestpolicy-丢弃队列中最老的任务-将当前这个任务继续提交给线程池"><a href="#discardoldestpolicy-丢弃队列中最老的任务-将当前这个任务继续提交给线程池" class="header-anchor">#</a> DiscardOldestPolicy：丢弃队列中最老的任务，将当前这个任务继续提交给线程池；</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * A handler for rejected tasks that discards the oldest unhandled
 * request and then retries {@code execute}, unless the executor
 * is shut down, in which case the task is discarded.
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">DiscardOldestPolicy</span> <span class="token keyword">implements</span> <span class="token class-name">RejectedExecutionHandler</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * Creates a {@code DiscardOldestPolicy} for the given executor.
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">DiscardOldestPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Obtains and ignores the next task that the executor
     * would otherwise execute, if one is immediately available,
     * and then retries execution of task r, unless the executor
     * is shut down, in which case task r is instead discarded.
     *
     * @param r the runnable task requested to be executed
     * @param e the executor attempting to execute this task
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">rejectedExecution</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> r<span class="token punctuation">,</span> <span class="token class-name">ThreadPoolExecutor</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">.</span><span class="token function">isShutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">getQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="callerrunspolicy-交给线程池调用所在的线程进行处理。"><a href="#callerrunspolicy-交给线程池调用所在的线程进行处理。" class="header-anchor">#</a> CallerRunsPolicy：交给线程池调用所在的线程进行处理。</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * A handler for rejected tasks that runs the rejected task
 * directly in the calling thread of the {@code execute} method,
 * unless the executor has been shut down, in which case the task
 * is discarded.
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">CallerRunsPolicy</span> <span class="token keyword">implements</span> <span class="token class-name">RejectedExecutionHandler</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * Creates a {@code CallerRunsPolicy}.
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">CallerRunsPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Executes task r in the caller's thread, unless the executor
     * has been shut down, in which case the task is discarded.
     *
     * @param r the runnable task requested to be executed
     * @param e the executor attempting to execute this task
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">rejectedExecution</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> r<span class="token punctuation">,</span> <span class="token class-name">ThreadPoolExecutor</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">.</span><span class="token function">isShutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            r<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="线程池的工作队列"><a href="#线程池的工作队列" class="header-anchor">#</a> 线程池的工作队列</h2> <h3 id="arrayblockingqueue"><a href="#arrayblockingqueue" class="header-anchor">#</a> ArrayBlockingQueue</h3> <p>有界队列，是一个用数组实现的有界阻塞队列，按 FIFO 排序。</p> <h3 id="linkedblockingqueue"><a href="#linkedblockingqueue" class="header-anchor">#</a> LinkedBlockingQueue</h3> <p>基于链表实现的阻塞队列，按 FIFO 排序任务，容量可以设置，不设置的话将是一个无边界的阻塞队列（最大长度是 Integer.MAX_VALUE），吞吐量通常要高于 ArrayBlockingQueue；newFixedThreadPool 线程池使用的就是这个队列。</p> <h3 id="delayqueue"><a href="#delayqueue" class="header-anchor">#</a> DelayQueue</h3> <p>DelayQueue 是一个任务定时周期延迟执行的队列。根据指定的执行从小到大排序，否则根据插入到队列的先后排序。newScheduledThreadPool 线程池使用了这个队列。</p> <h3 id="priorityblockingqueue"><a href="#priorityblockingqueue" class="header-anchor">#</a> PriorityBlockingQueue</h3> <p>优先级队列是具有优先级的无界阻塞队列。</p> <h3 id="synchronousqueue"><a href="#synchronousqueue" class="header-anchor">#</a> SynchronousQueue</h3> <p>同步队列，一个不存储元素的阻塞队列，每个插入操作都必须等待另一个线程调用移除操作，否则插入操作将一直处于阻塞状态。吞吐量通常要高于 LinkedBlockingQueue，newCachedThreadPool使用了这个队列。</p> <h2 id="几种常用的线程池"><a href="#几种常用的线程池" class="header-anchor">#</a> 几种常用的线程池</h2> <ul><li>newFixedThreadPool（固定数目线程的线程池，内部使用 LinkedBlockingQueue）</li> <li>newCachedThreadPool（可缓存线程的线程池，内部使用 SynchronousBlockingQueue）</li> <li>newSingleThreadPool（单线程的线程池，内部使用LinkedBlobkingQueue）</li> <li>newScheduledThreadPool（定时即周期性执行的线程池，内部使用DelayQueue）</li></ul> <h3 id="newfixedthreadpool"><a href="#newfixedthreadpool" class="header-anchor">#</a> newFixedThreadPool</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * Creates a thread pool that reuses a fixed number of threads
 * operating off a shared unbounded queue.  At any point, at most
 * {@code nThreads} threads will be active processing tasks.
 * If additional tasks are submitted when all threads are active,
 * they will wait in the queue until a thread is available.
 * If any thread terminates due to a failure during execution
 * prior to shutdown, a new one will take its place if needed to
 * execute subsequent tasks.  The threads in the pool will exist
 * until it is explicitly {@link ExecutorService#shutdown shutdown}.
 *
 * @param nThreads the number of threads in the pool
 * @return the newly created thread pool
 * @throws IllegalArgumentException if {@code nThreads &lt;= 0}
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ExecutorService</span> <span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token keyword">int</span> nThreads<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span>nThreads<span class="token punctuation">,</span> nThreads<span class="token punctuation">,</span>
                                  <span class="token number">0L</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">,</span>
                                  <span class="token keyword">new</span> <span class="token class-name">LinkedBlockingQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>线程池特点</strong></p> <blockquote><ul><li>核心线程数量 = 最大线程数量</li> <li>没有所谓的非空闲时间，即 keepAliveTime = 0</li> <li>阻塞队列为无界队列 LinkedBlockingQueue 提交任务的执行流程参照 ThreadPoolExecutor 及 newFixedThreadPool自行得出。</li></ul></blockquote> <h3 id="newcachethreadpool"><a href="#newcachethreadpool" class="header-anchor">#</a> newCacheThreadPool</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * Creates a thread pool that creates new threads as needed, but
 * will reuse previously constructed threads when they are
 * available.  These pools will typically improve the performance
 * of programs that execute many short-lived asynchronous tasks.
 * Calls to {@code execute} will reuse previously constructed
 * threads if available. If no existing thread is available, a new
 * thread will be created and added to the pool. Threads that have
 * not been used for sixty seconds are terminated and removed from
 * the cache. Thus, a pool that remains idle for long enough will
 * not consume any resources. Note that pools with similar
 * properties but different details (for example, timeout parameters)
 * may be created using {@link ThreadPoolExecutor} constructors.
 *
 * @return the newly created thread pool
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ExecutorService</span> <span class="token function">newCachedThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">,</span>
                                  <span class="token number">60L</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">,</span>
                                  <span class="token keyword">new</span> <span class="token class-name">SynchronousQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Runnable</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>线程池特点</strong></p> <blockquote><ul><li>核心线程数为 0，最大线程数为 Integer.MAX_VALUE</li> <li>非核心线程空闲的存活时间为 60s</li> <li>阻塞队列是 SynchronousQueue
执行流程参照 ThreadPoolExecutor 和 线程池特点自行得出。这个线程池有一个问题：当提交任务的数量大于处理任务的数量时，每次提交一个任务必然会创建一个非核心线程，极端情况下会创建过多的线程（最大 Integer.MAX_VALUE），耗尽 CPU 和内存资源。当然如果没有任务了，这些空闲的非核心线程在存活 60s 后被回收。使用场景：用于并发量大执行大量短期的小任务。</li></ul></blockquote> <h3 id="newsinglethreadexecuotr"><a href="#newsinglethreadexecuotr" class="header-anchor">#</a> newSingleThreadExecuotr</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * Creates a single-threaded executor that can schedule commands
 * to run after a given delay, or to execute periodically.  (Note
 * however that if this single thread terminates due to a failure
 * during execution prior to shutdown, a new one will take its
 * place if needed to execute subsequent tasks.)  Tasks are
 * guaranteed to execute sequentially, and no more than one task
 * will be active at any given time. Unlike the otherwise
 * equivalent {@code newScheduledThreadPool(1, threadFactory)}
 * the returned executor is guaranteed not to be reconfigurable to
 * use additional threads.
 * @param threadFactory the factory to use when creating new
 * threads
 * @return a newly created scheduled executor
 * @throws NullPointerException if threadFactory is null
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ScheduledExecutorService</span> <span class="token function">newSingleThreadScheduledExecutor</span><span class="token punctuation">(</span><span class="token class-name">ThreadFactory</span> threadFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DelegatedScheduledExecutorService</span>
        <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ScheduledThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> threadFactory<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>线程池特点</strong></p> <blockquote><ul><li>核心线程数=最大线程数=0，也就是这个线程池从始至终只有一个活着的线程。</li> <li>keppAliveTime = 0，这个参数无效。</li> <li>阻塞队列是无界的 LinkedBlockingQueue
提交任务的执行流程可自行得出。其实这个线程池里干活的只有一个，不管你往里塞多少任务，都是它按部就班的从队列里获取任务执行，适合于串行执行任务的场景，一个任务接一个任务的执行。</li></ul></blockquote> <h3 id="newscheduledthreadpool"><a href="#newscheduledthreadpool" class="header-anchor">#</a> newScheduledThreadPool</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * Creates a new ScheduledThreadPoolExecutor with the given
 * initial parameters.
 *
 * @param corePoolSize the number of threads to keep in the pool, even
 *        if they are idle, unless {@code allowCoreThreadTimeOut} is set
 * @param threadFactory the factory to use when the executor
 *        creates a new thread
 * @param handler the handler to use when execution is blocked
 *        because the thread bounds and queue capacities are reached
 * @throws IllegalArgumentException if {@code corePoolSize &lt; 0}
 * @throws NullPointerException if {@code threadFactory} or
 *         {@code handler} is null
 */</span>
<span class="token keyword">public</span> <span class="token class-name">ScheduledThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token keyword">int</span> corePoolSize<span class="token punctuation">,</span>
                                   <span class="token class-name">ThreadFactory</span> threadFactory<span class="token punctuation">,</span>
                                   <span class="token class-name">RejectedExecutionHandler</span> handler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>corePoolSize<span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> NANOSECONDS<span class="token punctuation">,</span>
          <span class="token keyword">new</span> <span class="token class-name">DelayedWorkQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> threadFactory<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>线程池特点</strong></p> <blockquote><ul><li>核心线程数自定义，最大线程数为 Integer.MAX_VALUE</li> <li>keepAliveTime = 0</li> <li>阻塞队列为 DelayedWorkQueue 这里 scheduleAtFixedRate 和 scheduleWithFixedDelay 两个方法的区别如下：
<ul><li>scheduleAtFixedRate：按某种速率周期性的执行，不管上一个任务有没有执行结束。也就是说从上一个任务开始执行算起 + 一个周期作为下一个任务的开始执行时间。</li></ul></li></ul></blockquote> <blockquote><div class="language- extra-class"><pre><code>* scheduleWithFixedDelay：在某个延迟后执行，是要等上一个任务执行结束算起的。也就是说从上一个任务执行结束时间 + 一个周期作为下一个任务的开始执行时间。
</code></pre></div></blockquote> <p>使用场景：周期性的执行任务的场景，做一些简单的定时调度。</p> <h2 id="线程池状态"><a href="#线程池状态" class="header-anchor">#</a> 线程池状态</h2> <p>线程池有几种状态：RUNNING、SHUTDOWN、STOP、TIDYING、TERMINATED</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 线程池状态</span>
<span class="token comment">// runState is stored in the high-order bits</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> RUNNING    <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> COUNT_BITS<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> SHUTDOWN   <span class="token operator">=</span>  <span class="token number">0</span> <span class="token operator">&lt;&lt;</span> COUNT_BITS<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> STOP       <span class="token operator">=</span>  <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> COUNT_BITS<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> TIDYING    <span class="token operator">=</span>  <span class="token number">2</span> <span class="token operator">&lt;&lt;</span> COUNT_BITS<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> TERMINATED <span class="token operator">=</span>  <span class="token number">3</span> <span class="token operator">&lt;&lt;</span> COUNT_BITS<span class="token punctuation">;</span>
</code></pre></div><img src="/learning_blog/img/java/thread/线程池状态.png" alt="线程池状态"> <p><strong>RUNNING</strong></p> <blockquote><ul><li>该状态的线程池会接受新任务，并处理阻塞队列中的任务</li> <li>调用 shutdown() 方法可以切换到 SHUTDOWN 状态</li> <li>调用 shutdownNow() 方法可以切换到 STOP 状态</li></ul></blockquote> <p><strong>SHUTDOWN</strong></p> <blockquote><ul><li>该状态的线程池不会接受新任务，但会处理阻塞队列中的任务</li> <li>队列为空，并且线程池中执行的任务也为空，进入 TIDYING 状态</li></ul></blockquote> <p><strong>STOP</strong></p> <blockquote><ul><li>该状态的线程池不会接受新任务，也不会处理阻塞队列中的任务，而且会终端正在执行中的任务</li> <li>线程池中执行的任务一旦变为空，进入 TIDYING 状态</li></ul></blockquote> <p><strong>TIDYING</strong></p> <blockquote><ul><li>该状态表明所有的任务已经运行终止，记录的任务数量为 0</li> <li>terminated() 执行完毕，进入 TERMINATED 状态</li></ul></blockquote> <p><strong>TERMINATED</strong>
该状态表明线程池彻底终止或死亡</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/learning_blog/java/thread/线程创建方式.html" class="prev"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        线程创建方式
      </a></span> <span class="next"><a href="/learning_blog/java/thread/线程生命周期.html">
        线程生命周期
        <i aria-label="icon: right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></i></a></span></p></div> </main> <!----></div><div class="global-ui"></div></div>
    <script src="/learning_blog/assets/js/app.b8c437fb.js" defer></script><script src="/learning_blog/assets/js/2.0271e996.js" defer></script><script src="/learning_blog/assets/js/36.1869c4d4.js" defer></script>
  </body>
</html>